<div>
    
    <main>
        <section>
          <div class="container">
            <div class="row mt-5">
              <div class="col-12 mb-5 mt-2">
                <a href="/agency/create-properties" class="new-discussion-btn bg-dark"><img src="asset/img/icons/plus-icon.png" alt=""> &nbsp; Add New Property</a>
              </div>
              <div class="col-lg-12">
                <div class="table-responsive">
                     <table class="table" id="livelearn-table">
                          <thead>
                               <th>
                                    <div class="d-flex align-items-center gap-2">
                                        <div
                                            class="form-check custom-checkbox checkbox-success check-lg">
                                            <input type="checkbox" class="form-check-input"
                                                id="customCheckBox8">
                                            <label class="form-check-label"
                                                for="customCheckBox8"></label>
                                        </div>
                                        <div class="apt_ful">
                                            <span>Property</span>
                                        </div>
                                    </div>
                               </th>
                               <th>Location</th>
                               <th>Country</th>
                               <th>Status</th>
                               <th>Amount</th>
                               <th>Date Listed</th>
                               <th></th>
                          </thead>
                         <tbody>
                          <tr>
                              <td>
                                  <div
                                    class="d-flex align-items-center justify-content-start gap-2">
                                    <div
                                        class="custom-control custom-checkbox ms-2 d-inline">
                                        <input type="checkbox"
                                            class="custom-control-input"
                                            id="customCheckBox2" required="">
                                        <label class="custom-control-label"
                                            for="customCheckBox2"></label>
                                    </div>
                                    <div class="apt_ful">
                                      2 Plots of Land
                                    </div>
                                </div>
                               </td>
                               <td>Abakaliki, Ebonyi State</td>
                               <td>Nigeria</td>
                               <td><span class="live-badge success">Available</span></td>
                               <td>N750,000</td>
                               <td>March 23, 2024 12:00PM </td>
                               <td class="cursor-p" data-bs-toggle="modal" data-bs-target="#editPropertyModal"><i class="fa fa-ellipsis-h"></i></td>
                          </tr>
                          <tr>
                              <td>
                                  <div
                                    class="d-flex align-items-center justify-content-start gap-2">
                                    <div
                                        class="custom-control custom-checkbox ms-2 d-inline">
                                        <input type="checkbox"
                                            class="custom-control-input"
                                            id="customCheckBox2" required="">
                                        <label class="custom-control-label"
                                            for="customCheckBox2"></label>
                                    </div>
                                    <div class="apt_ful">
                                      2 Plots of Land
                                    </div>
                                </div>
                               </td>
                               <td>Abakaliki, Ebonyi State</td>
                               <td>Nigeria</td>
                               <td><span class="live-badge success">Available</span></td>
                               <td>N750,000</td>
                               <td>March 23, 2024 12:00PM </td>
                               <td class="cursor-p" data-bs-toggle="modal" data-bs-target="#editPropertyModal"><i class="fa fa-ellipsis-h"></i></td>
                          </tr>
                          <tr>
                              <td>
                                  <div
                                    class="d-flex align-items-center justify-content-start gap-2">
                                    <div
                                        class="custom-control custom-checkbox ms-2 d-inline">
                                        <input type="checkbox"
                                            class="custom-control-input"
                                            id="customCheckBox2" required="">
                                        <label class="custom-control-label"
                                            for="customCheckBox2"></label>
                                    </div>
                                    <div class="apt_ful">
                                      2 Plots of Land
                                    </div>
                                </div>
                               </td>
                               <td>Abakaliki, Ebonyi State</td>
                               <td>Nigeria</td>
                               <td><span class="live-badge success">Available</span></td>
                               <td>N750,000</td>
                               <td>March 23, 2024 12:00PM </td>
                               <td class="cursor-p" data-bs-toggle="modal" data-bs-target="#editPropertyModal"><i class="fa fa-ellipsis-h"></i></td>
                          </tr>
                          <tr>
                              <td>
                                  <div
                                    class="d-flex align-items-center justify-content-start gap-2">
                                    <div
                                        class="custom-control custom-checkbox ms-2 d-inline">
                                        <input type="checkbox"
                                            class="custom-control-input"
                                            id="customCheckBox2" required="">
                                        <label class="custom-control-label"
                                            for="customCheckBox2"></label>
                                    </div>
                                    <div class="apt_ful">
                                      2 Plots of Land
                                    </div>
                                </div>
                               </td>
                               <td>Abakaliki, Ebonyi State</td>
                               <td>Nigeria</td>
                               <td><span class="live-badge success">Available</span></td>
                               <td>N750,000</td>
                               <td>March 23, 2024 12:00PM </td>
                               <td class="cursor-p" data-bs-toggle="modal" data-bs-target="#editPropertyModal"><i class="fa fa-ellipsis-h"></i></td>
                          </tr>
                          <tr>
                              <td>
                                  <div
                                    class="d-flex align-items-center justify-content-start gap-2">
                                    <div
                                        class="custom-control custom-checkbox ms-2 d-inline">
                                        <input type="checkbox"
                                            class="custom-control-input"
                                            id="customCheckBox2" required="">
                                        <label class="custom-control-label"
                                            for="customCheckBox2"></label>
                                    </div>
                                    <div class="apt_ful">
                                      2 Plots of Land
                                    </div>
                                </div>
                               </td>
                               <td>Abakaliki, Ebonyi State</td>
                               <td>Nigeria</td>
                               <td><span class="live-badge success">Available</span></td>
                               <td>N750,000</td>
                               <td>March 23, 2024 12:00PM </td>
                               <td class="cursor-p" data-bs-toggle="modal" data-bs-target="#editPropertyModal"><i class="fa fa-ellipsis-h"></i></td>
                          </tr>
                          <tr>
                              <td>
                                  <div
                                    class="d-flex align-items-center justify-content-start gap-2">
                                    <div
                                        class="custom-control custom-checkbox ms-2 d-inline">
                                        <input type="checkbox"
                                            class="custom-control-input"
                                            id="customCheckBox2" required="">
                                        <label class="custom-control-label"
                                            for="customCheckBox2"></label>
                                    </div>
                                    <div class="apt_ful">
                                      2 Plots of Land
                                    </div>
                                </div>
                               </td>
                               <td>Abakaliki, Ebonyi State</td>
                               <td>Nigeria</td>
                               <td><span class="live-badge success">Available</span></td>
                               <td>N750,000</td>
                               <td>March 23, 2024 12:00PM </td>
                               <td class="cursor-p" data-bs-toggle="modal" data-bs-target="#editPropertyModal"><i class="fa fa-ellipsis-h"></i></td>
                          </tr>
                         </tbody>
                     </table>
                </div>
              </div>
            </div>
            </div>
         </section>
      </main>

      <div class="modal fade" id="editPropertyModal" tabindex="-1" aria-labelledby="editPropertyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm modal-dialog-centered">
             <div class="modal-content">
                  <div class="modal-body rounded">
                      <a href="/agency/edit-properties" class="new-discussion-btn btn-success d-block w-100 mb-4"><i class="fa fa-pen"></i> Edit Property</a>
                      
                        <button type="button" data-bs-dismiss="modal" class="new-discussion-btn outline-success w-100 mb-2">Cancel</button>
                  </div>
             </div>
        </div>
    </div>
</div>

 <!--IMAGE JS-->
 <script>
  document.addEventListener('DOMContentLoaded', function(){
      document.getElementById('img-upload').addEventListener('change', function(){
          var input = this;
          if (input.files && input.files[0]){
              for (let i = 0; i < input.files.length; i++){
                console.log(input.files[i].name)

                var reader = new FileReader();
                reader.onload = function(e) {
                  let html = `
                    <div class="npi-card">
                      <img src="${e.target.result}" class="bg-prop" alt="">
                      <div class="trash-prop"><img src="asset/img/icons/trash-icon-red.png" alt=""></div>
                    </div>
                  `;
                    document.getElementById('npi-container').innerHTML += html;
                }

                reader.readAsDataURL(input.files[i]);

              }
          }
      })
  })
</script> 

<!--VIDEO JS-->
<script>
  var videoContainers = $('.video-ctn');

  document.getElementById('vid-upload').addEventListener('change', function(event) {
  const file = event.target.files;
  console.log(file);

  for(let i = 0; i < file.length; i++){


    var playerId = videoContainers.length + 1;
    
    if (file && file[i].type.startsWith('video/')) {

          const reader = new FileReader();
          
          reader.onload = function(event) {
              // const videoElement = document.createElement('video');
              // videoElement.src = event.target.result;
              // videoElement.controls = true;

            

              var htm = `
                <div class="npi-card video-ctn">
                  <video id="player${playerId}" controls playsinline data-poster="">
                    <source src="${event.target.result}"  type="video/mp4"></video>
                  <div class="trash-prop"><img src="asset/img/icons/trash-icon-red.png" alt=""></div>
                </div>
              `;

                const parser = new DOMParser();
                const doc = parser.parseFromString(htm,'text/html');
                const videoElement = doc.body.firstChild;
              
              const ctn = document.getElementById('npi-vid-container');
              // ctn.innerHTML += html;
              ctn.appendChild(videoElement);
              playVideo(`#player${playerId}`);
          };
          
          reader.readAsDataURL(file[i]);
    } 
    
  }
});


function playVideo(id){
    const player = new Plyr(id, {
      controls: ['play-large',],
      debug: false
  });
}
</script>
